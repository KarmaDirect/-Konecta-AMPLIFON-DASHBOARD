**Cahier des Charges Ultra DÃ©taillÃ© â€“ Dashboard Agents RDV (Konecta)**

---

### ðŸŽ¯ Objectif GÃ©nÃ©ral

CrÃ©er une interface web ludique, collaborative et visuellement engageante pour permettre Ã  un superviseur (comme Hatim) de suivre, distribuer et ajuster les objectifs de rendez-vous (RDV) de ses agents CRM et Digitaux.

### ðŸ§± Stack Technique

* **React.js** via **Vite** pour le frontend.
* **Tailwind CSS** pour le design et les styles.
* **XLSX (SheetJS)** pour lâ€™exportation des donnÃ©es en fichier Excel.

---

### ðŸ§© Structure Fonctionnelle et Logique MÃ©tier

#### 1. **En-tÃªte**

* Logos **Konecta** et **Amplifon** en haut.
* Titre principal (emoji inclus) pour donner une identitÃ© claire Ã  lâ€™outil.
* Lien vers le "Grand Ã©cran avancÃ©" (version projection ou TV). Ce lien est statique mais permet de basculer vers une vue dÃ©diÃ©e.

#### 2. **RÃ©sumÃ© Objectifs Globaux (Bloc RÃ©capitulatif)**

* Colonne CRM et Colonne Digital :

  * `agents.length` (nombre dâ€™agents actifs sur cette section)
  * `Objectif total = somme des objectifs`.
  * `RDV restants = somme des objectifs restants actuels`.

#### 3. **Ajout dâ€™un Agent**

* Formulaire en 3 Ã©tapes :

  1. Nom de lâ€™agent (obligatoire, champ texte).
  2. Objectif (nombre par dÃ©faut = 20, modifiable).
  3. Cases Ã  cocher : CRM / Digital pour dÃ©terminer la campagne assignÃ©e.

**Ã€ lâ€™ajout :**

```js
const newEntry = {
  name: newAgent.trim(),
  objectif: Number(newObjective),
  currentCRM: isCRM ? Number(newObjective) : null,
  currentDigital: isDigital ? Number(newObjective) : null
};
```

Ce qui signifie : un agent peut avoir un objectif sur CRM, sur Digital, ou les deux. Ces valeurs sont initialisÃ©es et modifiables ensuite manuellement.

#### 4. **RÃ©initialisation des objectifs**

* Bouton qui remet tous les `currentCRM` et `currentDigital` Ã  leur valeur initiale `objectif`.

```js
setAgents(prev => prev.map(a => ({
  ...a,
  currentCRM: a.objectif,
  currentDigital: a.objectif
})));
```

#### 5. **RÃ©partition des RDV totaux** (CRM ou Digital)

* L'utilisateur saisit une valeur `rdvCRMTotal` ou `rdvDigitalTotal`.
* Ã€ la rÃ©partition :

```js
const rdvParAgent = Math.floor(rdvTotal / agentCount);
const reste = rdvTotal % agentCount;
```

* Chaque agent reÃ§oit `rdvParAgent`, et les `reste` premiers agents reÃ§oivent +1.
* Cela permet une distribution **Ã©quitable**, tout en respectant le total.

#### 6. **Affichage Agents sous forme de Cartes**

Chaque carte dâ€™agent contient :

* Nom de lâ€™agent.
* Emoji selon lâ€™avancement :

```js
const ratio = 1 - current / objectif;
```

* ðŸ‘‘ â‰¥ 100%
* ðŸ”¥ â‰¥ 75%
* ðŸ’ª â‰¥ 50%
* âš¡ â‰¥ 25%
* ðŸ•“ sinon
* Input modifiable : heures de travail (par dÃ©faut `1`)
* Texte : "Il te reste X rendez-vous" ou "Tu as fait Y bonus !"
* RDV/h est calculÃ© ainsi :

```js
(totalRDV / somme des heures totales saisies)
```

* Boutons âž– âž• qui dÃ©clenchent :

```js
updateCount(index, delta, type);
```

* Si la valeur devient < 0, et que câ€™est la premiÃ¨re fois â†’ dÃ©clenche une alerte :

```js
alert(`ðŸŽ‰ Bravo ${agent.name} ! Tu as dÃ©passÃ© ton objectif...`)
```

#### 7. **Top 3 Agents CRM & Digital**

* MÃ©thode : trie des agents sur la diffÃ©rence `objectif - current` dÃ©croissante.
* Les 3 meilleurs sont affichÃ©s en haut dans un encart animÃ© avec leurs stats.
* Bonus : si un agent est en **bonus** (valeur < 0), on affiche un â­ animÃ©.

#### 8. **Export Excel**

* Export de lâ€™Ã©tat actuel des agents dans une feuille `.xlsx` :

```js
Agent, Objectif, RDV CRM Restants, RDV Digitaux Restants
```

Utilise la lib `xlsx` pour cela :

```js
XLSX.utils.json_to_sheet([...]);
XLSX.writeFile(...);
```

---

### ðŸŽ¨ ExpÃ©rience Utilisateur (UX/UI)

* Design motivant : emojis, animations `bounce` et `ping`, couleurs Tailwind (`green-500`, `blue-100`, etc.)
* Interface en grille responsive (`grid-cols-1`, `md:grid-cols-2`, `lg:grid-cols-3`).
* Progress bar :

```html
<div style="width: ${ratioGlobal * 100}%">...</div>
```

* Retours visuels Ã  chaque interaction (click, ajout, modif, bonus).

---

### ðŸ§  RÃ©sumÃ© des Comportements ClÃ©s

| Action           | RÃ©sultat                 | Logique              | Feedback                       |
| ---------------- | ------------------------ | -------------------- | ------------------------------ |
| Ajouter un agent | Ajoute Ã  la liste        | Push dans le state   | Reset du champ + UI            |
| RÃ©partir les RDV | Calcul Ã©quitable         | floor() + modulo     | Mise Ã  jour instantanÃ©e        |
| âž• âž– boutons      | IncrÃ©mente ou dÃ©crÃ©mente | delta sur `currentX` | Animation + Alert Bonus si < 0 |
| Modifier heures  | Change le RDV/h          | UtilisÃ© dans calcul  | Dynamique                      |
| Export Excel     | GÃ©nÃ¨re fichier           | XLSX Sheet           | TÃ©lÃ©chargement auto            |

---

### âœ… Objectif Final

Permettre Ã  un responsable de visualiser **en temps rÃ©el** :

* Les Ã©carts par agent.
* Le nombre dâ€™agents performants.
* La dynamique collective (progression totale). Et permettre **Ã  chaque agent** de se situer dans lâ€™effort collectif, via une interface simple, visuelle, motivante et directe.

---

Fin du cahier des charges technique fonctionnel (destinÃ© Ã  Bolt.new ou IA front-end builder).

ðŸ”§ Fichier principal : `Dashboard.jsx` ðŸŽ¨ Styles intÃ©grÃ©s via TailwindCSS ðŸ§¾ Export structurÃ© : `.xlsx` ðŸ“Š Ratio, bonus et performances calculÃ©s dynamiquement en JS pur
